# 需求分析与功能点设计

## 需求分析 [XQFX]

### 用户调研摘要

通过对现有用户的调研，我们发现用户在使用按钮组件时有以下几个主要需求：

1. **多样化的按钮样式**：用户希望能够使用不同类型、形状和尺寸的按钮，以适应不同的使用场景。
2. **图标按钮**：用户希望按钮能够包含图标，以便在视觉上更直观地传达功能。
3. **禁用状态**：用户希望能够禁用按钮，以防止误操作。
4. **加载状态**：用户希望按钮能够显示加载状态，以便在执行异步操作时提供反馈。
5. **按钮组**：用户希望能够将多个按钮组合在一起，以便在界面上更紧凑地展示相关操作。

### 竞品对比报告

在对比了市场上几款流行的 UI 组件库（如 Element UI、Ant Design、Vuetify）的按钮组件后，我们发现：

1. **Element UI**：提供了丰富的按钮样式和状态支持，包括不同类型、形状、尺寸、图标按钮、禁用状态、加载状态和按钮组。
2. **Ant Design**：同样提供了丰富的按钮样式和状态支持，并且在交互设计上更加注重细节，例如按钮的点击反馈和加载动画。
3. **Vuetify**：提供了多样化的按钮样式和状态支持，并且在响应式设计上表现出色，能够适应不同屏幕尺寸的设备。

### 市场趋势分析

随着前端技术的发展，用户对 UI 组件的要求越来越高，尤其是对按钮组件的需求更加多样化和个性化。未来的趋势可能包括：

1. **更丰富的样式和状态支持**：用户希望能够自定义按钮的样式和状态，以便更好地适应不同的使用场景。
2. **更好的交互体验**：用户希望按钮在交互上能够提供更好的反馈，例如点击动画、加载动画等。
3. **响应式设计**：用户希望按钮能够在不同屏幕尺寸的设备上表现出色，提供一致的用户体验。

### 用户痛点

1. **样式单一**：现有的按钮样式较为单一，无法满足用户对多样化样式的需求。
2. **缺乏图标支持**：现有的按钮组件缺乏图标支持，无法在视觉上直观地传达功能。
3. **缺乏加载状态**：现有的按钮组件缺乏加载状态，无法在执行异步操作时提供反馈。
4. **缺乏按钮组**：现有的按钮组件无法将多个按钮组合在一起，导致界面上操作按钮分散，不够紧凑。

### 期望功能

1. **多样化的按钮样式**：支持不同类型（如 primary、success、warning、danger、info）、形状（如 plain、round、circle）和尺寸（如 large、default、small）的按钮。
2. **图标按钮**：支持在按钮中添加图标，以便在视觉上更直观地传达功能。
3. **禁用状态**：支持禁用按钮，以防止误操作。
4. **加载状态**：支持按钮显示加载状态，以便在执行异步操作时提供反馈。
5. **按钮组**：支持将多个按钮组合在一起，以便在界面上更紧凑地展示相关操作。

### 安全性需求

1. **防止误操作**：通过禁用状态和节流模式，防止用户在按钮执行操作时误操作。
2. **数据安全**：确保按钮在执行操作时不会泄露用户数据。

## 功能点设计 [GNSJ]

### 功能描述

Eric-UI 的按钮组件提供了多种类型、形状和尺寸的按钮，支持图标、禁用状态、加载状态和按钮组功能，以满足用户在不同场景下的需求。

### API 设计

#### Button 组件

##### Props

| Name              | Description                         | Type                   | Default   |
| ----------------- | ----------------------------------- | ---------------------- | --------- | --------- | --------- | ------- | --------- |
| size              | 按钮尺寸                            | `enum` - `'large'      | 'default' | 'small'`  | 'default' |
| type              | 按钮类型                            | `enum` - `'primary'    | 'success' | 'warning' | 'danger'  | 'info'` | 'default' |
| plain             | 是否为朴素按钮                      | `boolean`              | false     |
| round             | 是否为圆角按钮                      | `boolean`              | false     |
| circle            | 是否为圆形按钮                      | `boolean`              | false     |
| loading           | 是否为加载中状态                    | `boolean`              | false     |
| loading-icon      | 自定义加载中状态图标组件            | `string`               | 'spinner' |
| disabled          | 按钮是否为禁用状态                  | `boolean`              | false     |
| icon              | 按钮图标                            | `string`               | -         |
| autofocus         | 是否自动聚焦(原生 `autofocus` 属性) | `boolean`              | false     |
| native-type       | 原生 type 属性                      | `enum` - `'button'     | 'submit'  | 'reset'`  | 'button'  |
| tag               | 自定义元素标签                      | `string` / `Component` | 'button'  |
| use-throttle      | 是否使用节流模式                    | `boolean`              | true      |
| throttle-duration | 节流模式下，节流时间间隔(ms)        | `number`               | 500       |

##### Events

| Name  | Description  | Type                          |
| ----- | ------------ | ----------------------------- |
| click | 按钮点击事件 | `(event: MouseEvent) => void` |

##### Slots

| Name    | Description        |
| ------- | ------------------ |
| default | 默认插槽, 按钮内容 |
| loading | 自定义加载图标     |

##### Expose

| Name     | Description    | Type                     |
| -------- | -------------- | ------------------------ | --------- | --------- |
| ref      | 按钮 html 元素 | `Ref<HTMLButtonElement>` |
| size     | 按钮尺寸       | `ComputedRef<''          | 'small'   | 'large'>` |
| type     | 按钮类型       | `ComputedRef<''          | 'primary' | ...>`     |
| disabled | 按钮禁用状态   | `ComputedRef<boolean>`   |

#### ButtonGroup 组件

##### Props

| Name     | Description          | Type                | Default   |
| -------- | -------------------- | ------------------- | --------- | --------- | --------- | ------- | --------- |
| size     | 按钮组尺寸           | `enum` - `'large'   | 'default' | 'small'`  | 'default' |
| type     | 按钮组类型           | `enum` - `'primary' | 'success' | 'warning' | 'danger'  | 'info'` | 'default' |
| disabled | 按钮组是否为禁用状态 | `boolean`           | false     |

##### Slots

| Name    | Description | Sub Component |
| ------- | ----------- | ------------- |
| default | 默认插槽    | Button        |

### 交互关系

1. **按钮点击**：用户点击按钮时，会触发 `click` 事件，并根据按钮的 `type`、`disabled` 等属性决定按钮的行为。
2. **加载状态**：当按钮处于加载状态时，按钮会显示加载图标，并且禁用点击操作。
3. **禁用状态**：当按钮处于禁用状态时，按钮会显示为灰色，并且禁用点击操作。
4. **按钮组**：按钮组内的按钮会共享相同的 `size` 和 `type` 属性，并且可以一起禁用。

### 功能实现细节

1. **多样化的按钮样式**：通过 `type`、`plain`、`round` 和 `circle` 属性来定义按钮的样式。
2. **图标按钮**：通过 `icon` 属性来定义按钮的图标。
3. **禁用状态**：通过 `disabled` 属性来定义按钮是否被禁用。
4. **加载状态**：通过 `loading` 和 `loading-icon` 属性来定义按钮的加载状态。
5. **按钮组**：通过 `ButtonGroup` 组件来对多个按钮进行分组。

### 用户操作流程

1. **点击按钮**：用户点击按钮，触发 `click` 事件。
2. **加载状态**：如果按钮处于加载状态，显示加载图标，并禁用点击操作。
3. **禁用状态**：如果按钮处于禁用状态，显示为灰色，并禁用点击操作。
4. **按钮组操作**：用户点击按钮组内的按钮，触发相应的 `click` 事件。

### 异常处理

1. **按钮点击无响应**：检查按钮是否处于禁用状态或加载状态。
2. **加载图标显示异常**：检查 `loading-icon` 属性是否设置正确。
3. **按钮组操作异常**：检查 `ButtonGroup` 组件的 `size` 和 `type` 属性是否设置正确。
